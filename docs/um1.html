<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Keith A. Lewis" />
  <meta name="dcterms.date" content="2024-08-30" />
  <title>Unified Model</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    /* CSS for citations */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
      margin-bottom: 0em;
    }
    .hanging-indent div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }  </style>
  <link rel="stylesheet" href="math.css" />
  <script defer=""
  src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: true
   });
}}});
  </script>
  <link rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" />
</head>
<body>
<header id="title-block-header">
<h1 class="title">Unified Model</h1>
<p class="author">Keith A. Lewis</p>
<p class="date">August 30, 2024</p>
<div class="abstract">
<div class="abstract-title">Abstract</div>
Value, hedge, and manage the risk of derivative instruments.
</div>
</header>
<p>This note provides a replacement for the Black, Scholes<span
class="citation" data-cites="BlaSch1973">(Black and Scholes 1973)</span>
and Merton<span class="citation" data-cites="Mer1973">(Merton
1973)</span> theory of option valuation. Scholes and Merton won a Nobel
Prize in Economics for showing how to value a derivative instrument
using dynamic hedging: the value is the cost of setting up the initial
hedge. The Achilles heel of their model is their assumption of
continuous time trading. This leads to untenable results<a href="#fn1"
class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>,
something <a href="https://iep.utm.edu/zenos-paradoxes/">Zeno</a>
pointed out 2,500 years ago.</p>
<p>Continuous time trading is a mathematical artifact of the theory of
Ito processes and duped many academics into believing complete markets
and perfect hedges exist. Every trader and risk manager knows this does
not correspond to reality after a few days on the job. Trades occur at
discrete times based on available information. The primary unsolved
problem in mathematical finance is how to advise traders when and how
much to hedge. There is still work to be done on how well hedges work
once you accept the fact markets are not complete.</p>
<p>One benefit of working as a quant during the heyday of derivatives
was having a front row seat to how the software implementations of the
theory performed. When the hedges provided by your implementation of a
model started losing money, or even gaining money, you would get a visit
from someone paying your salary expecting an explanation. I quickly
learned the importance of gamma profiles. We can do better than the
trader aphorism, “Hedge when you can, not when you have to.”</p>
<p>When a theory in physics does not agree with observation, it is time
to come up with a new theory. The tenor of the time at the end of the
19th century was that Newton’s theory of gravitation and Maxwell’s
theory of electromagnatism had been successfully carried out. Lord
Kelvin proclaimed “It is just a matter of adding decimal points to
physical constants.”</p>
<p>The Achille’s heel of classical theory at the time was its prediction
of black body radiation. Experiment did not agree with observation.</p>
<blockquote>
<p><em>Für die Richtung des dabeieinzuschlagenden Gedankenganges giebt
der Hinblick auf dieUnhaltbarkeit der früher gemachten Voraussetzung
einen Finger-zeig</em>. – Max Planck</p>
</blockquote>
<blockquote>
<p><em>The untenability of the assumption made earlier provides an
indication of the direction of the line of thought to be taken</em>.</p>
</blockquote>
<p>Max Planck came up with a simple solution to fit the data: assume
photons were emitted in integer multiples of of the <em>Planck
constant</em>. Instrument prices are integer multiples of a minimum
trading unit, not real numbers. This fact is relevant for accurate
valuation of 0-day options.</p>
<p>The untenable assumption of the Black-Scholes/Merton theory is that
continous time trading is possible. The indicated direction is to
provide a theory reflecting the fact traders decide at discrete times
based on available information what to trade.</p>
<section id="unified-model" class="level2">
<h2>Unified Model</h2>
<p>The Unified Model is an extension of Stephen Ross’<span
class="citation" data-cites="Ros1978">(Ross 1978)</span> “A Simple
Approach to the Valuation of Risky Streams”. According to Ross</p>
<blockquote>
<p><em>If there are no arbitrage opportunities in the capital markets,
then there exists a (not generally unique) valuation operator, <span
class="math inline">L</span></em>.</p>
</blockquote>
<p>He used the Hahn-Banach theorem to show the existence of <span
class="math inline">L</span> and observed it is not unique if the market
is not complete. This set off a cottage industry of Mathematical Finance
nitpickers pointing out he had not established the existence of an
interior point required for the application of the Hahn-Banach theorem.
This culminated in Delbaen and Schachermeyer’s No Free Lunch with
Vanishing Arbitrage theorem to get around the fact that the unit ball in
the <span class="math inline">L^\infty</span> weak-<span
class="math inline">*</span> topology does not have an interior point.
Something no business person has ever found useful.</p>
<!--
Eventually this was called the _Fundamental Theorem of Asset Pricing_.
-->
<p>The Unified Model does not require the Hahn-Banach theorem. It also
does not involve a so-called real-world probability measure that is
immediately throw out to get a risk-neutral probability measure. It does
not involve stochastic integrals, the Ito formula, partial differential
equations, much less weak-<span class="math inline">*</span> topologies.
It does not even involve probability. The Fundamental Theorem of Asset
pricing is a geometric fact. Positive measures having mass 1 show up,
but they are not the probability of anything.</p>
<p>Every arbitrage-free model is determined by deflators that correspond
to Ross’ valuation operator <span class="math inline">L</span> and a
martingale measure. If repurchase agreements are available there is a
canonical deflator. Market instruments have prices and associated cash
flows. Trading involves buying and selling instruments at discrete
times. These determine the value, or mark-to-market, of the strategy and
the amounts showing up in the trading account.</p>
<p>This note does not solve the crucial problem of when and how much to
trade. It only provides an elementary and mathematically rigorous
framework to put your nose in the most important unsolved problem in
Mathematical Finance.</p>
</section>
<section id="unified-model-1" class="level2">
<h2>Unified Model</h2>
<p>We assume you are familiar with measure theory and stochastic
processes, but are not necessarily an expert.</p>
</section>
<section id="preliminaries" class="level2">
<h2>Preliminaries</h2>
<details>
<summary>
Details
</summary>
<p>Let <span class="math inline">\Omega</span> be a set of possible
outcomes. <em>Partial information</em> is modeled by a partition of
<span class="math inline">\Omega</span>. A collection of subsets of
<span class="math inline">\Omega</span>, <span
class="math inline">\{A_j\}</span>, is a <em>partition</em> if they are
pairwise disjoint and their union is <span
class="math inline">\Omega</span>. Full information is knowing <span
class="math inline">\omega\in\Omega</span>. Partial information is
knowing only to which atom <span class="math inline">\omega</span>
belongs. No information is modeled by the singleton partition <span
class="math inline">\{\Omega\}</span>.</p>
<p>An <em>algebras of sets</em> is a collection of sets closed under
union and complement.</p>
<p><strong>Exercise</strong>. <em>Show algebras of sets are closed under
intersection</em>.</p>
<p><em>Hint</em>: Let <span class="math inline">A&#39; = \Omega\setminus
A = \{\omega\in\Omega\mid \omega\not\in A\}</span> be the set complement
of <span class="math inline">A</span> in <span
class="math inline">\Omega</span>. Use De Morgan’s Law <span
class="math inline">(A\cap B)&#39; = A&#39;\cup B&#39;</span>.</p>
<p>We can identify a set <span class="math inline">A</span> with its
<em>indicator function</em> <span
class="math inline">1_A\colon\Omega\to\boldsymbol{R}</span> defined by
<span class="math inline">1_A(\omega) = 1</span> if <span
class="math inline">\omega\in A</span> and <span
class="math inline">1_A(\omega) = 0</span> if <span
class="math inline">\omega\not\in A</span>. Note <span
class="math inline">1_{A\cup B} = 1_A + 1_B - 1_{A\cap B}</span>, <span
class="math inline">1_{A&#39;} = 1 - 1_A</span>, and <span
class="math inline">1_{A\cap B} = 1_A 1_B</span>,</p>
<p><strong>Exercise</strong>. <em>Prove De Morgan’s Law</em>.</p>
<p><em>Hint</em>: Start from <span class="math inline">1_{A&#39;\cup
B&#39;} = 1_{A&#39;} + 1_{B&#39;} - 1_{A&#39;\cap B&#39;}</span>.</p>
<p>Calculations on algebras of sets is algebra.</p>
<p>If <span class="math inline">{\mathcal{A}}</span> is a finite algebra
of sets on <span class="math inline">\Omega</span> then <span
class="math inline">[\omega] = \cap\{A\in{\mathcal{A}}\mid\omega\in
A\}</span> is the <em>atom</em> of <span
class="math inline">{\mathcal{A}}</span> containing <span
class="math inline">{\omega\in\Omega}</span>.</p>
<p><strong>Exercise</strong>. <em>If <span
class="math inline">B\subseteq[\omega]</span> and <span
class="math inline">B\in{\mathcal{A}}</span> then <span
class="math inline">B = \emptyset</span> or <span class="math inline">B
= [\omega]</span></em>.</p>
<p><strong>Exercise</strong>. <em>The atoms of <span
class="math inline">{\mathcal{A}}</span>, <span
class="math inline">[{\mathcal{A}}]</span>, form a partition of <span
class="math inline">\Omega</span></em>.</p>
<p>This shows we can identify a finite algebra of sets with its
atoms.</p>
<p>A function <span
class="math inline">X\colon\Omega\to\boldsymbol{R}</span> is <span
class="math inline">{\mathcal{A}}</span>-<em>measurable</em> for an
algebra of sets <span class="math inline">{\mathcal{A}}</span> if <span
class="math inline">\{\omega\in\Omega\mid X(\omega) \le x\}</span>
belongs to <span class="math inline">{\mathcal{A}}</span> for all <span
class="math inline">x\in\boldsymbol{R}</span>.</p>
<p><strong>Exercise</strong>. <em>If <span
class="math inline">{\mathcal{A}}</span> is finite, show <span
class="math inline">X</span> is <span
class="math inline">{\mathcal{A}}</span>-measurable if and if and only
if it is constant on atoms of <span
class="math inline">{\mathcal{A}}</span></em>.</p>
<p>This shows <span
class="math inline">X\colon[{\mathcal{A}}]\to\boldsymbol{R}</span>
<em>is</em> a function. We jettison the word ‘measurable’ and say <span
class="math inline">X</span> <em>is known given</em> <span
class="math inline">{\mathcal{A}}</span>.</p>
<section id="integration" class="level3">
<h3>Integration</h3>
<p>Integration is a <em>linear functional</em>: it assigns a function to
a number where a constant times a function is assigned to the constant
times the integral and the integral of the sum of two functions is the
sum of the integrals. Integration involves <em>measures</em>. A
finitely-additive measure is a <em>set function</em> <span
class="math inline">\lambda\colon{\mathcal{A}}\to\boldsymbol{R}</span>
satisfying <span class="math inline">\lambda(A\cup B) = \lambda(A) +
\lambda(B) - \lambda(A\cap B)</span> and <span
class="math inline">\lambda(\emptyset) = 0</span>. Measures don’t count
things twice and the measure of the empty set is 0.</p>
<p>If <span class="math inline">S</span> is a set and <span
class="math inline">f\colon S\to\boldsymbol{R}</span> is a function on
<span class="math inline">S</span> define its <em>norm</em> <span
class="math inline">\|f\| = \sup_{s\in S} |f(s)\|</span>. Let <span
class="math inline">B(S) = \{f\colon S\to\boldsymbol{R}\mid \|f\| &lt;
\infty\}</span> be the <em>normed linear space</em> of bounded functions
on <span class="math inline">S</span>. The <em>dual</em> of <span
class="math inline">B(S)</span>, <span
class="math inline">B(S)^*</span>, is the set of all <em>bounded linear
functionals</em> <span class="math inline">L\colon
B(S)\to\boldsymbol{R}</span>. A linear functional is bounded if there
exists a constant <span class="math inline">M\in\boldsymbol{R}</span>
with <span class="math inline">|Lf| \le M\|f\|</span> for all <span
class="math inline">f\in B(S)</span>. The least such constant is the
<em>norm</em> of <span class="math inline">L</span>, <span
class="math inline">\|L\|</span>.</p>
<p>Every bounded linear functional gives rise to a finitely-additive
measure <span class="math inline">\lambda</span> on <span
class="math inline">S</span> by <span class="math inline">\lambda(A) =
L1_A</span>. Let <span class="math inline">ba(S)</span> denote all
finitely-additive measures on <span class="math inline">S</span>. We now
show how to identify <span class="math inline">B(S)^*</span> with <span
class="math inline">ba(S)</span>.</p>
<p><strong>Exercise</strong>: <em>Show <span
class="math inline">\lambda</span> is a measure</em>.</p>
<p>Every finitely-additive measure gives rise to a linear functional. We
say <span class="math inline">f</span> is <em>elementary</em> if it is a
finite linear combination of indicator functions <span
class="math inline">f = \sum_j a_j 1_{A_j}</span>. Given a measure <span
class="math inline">\lambda</span> define <span class="math inline">Lf =
\sum_j a_j \lambda(A_j)</span>.</p>
<p><strong>Exercise</strong>. <em>If <span
class="math inline">\{A_j\}</span> are pairwise disjoint show <span
class="math inline">Lf = 0</span> implies <span class="math inline">f =
0</span></em>.</p>
<p><strong>Exercise</strong>. <em>Show for any collection <span
class="math inline">\{B_i\}</span> we have <span
class="math inline">\sum_i b_i 1_{B_i} = \sum_j a_j 1_{A_j}</span> where
<span class="math inline">\{A_j\}</span> are pairwise disjoint</em>.</p>
<p><em>Hint</em>: Use <span class="math inline">1_{E\cup F} =
1_{E\setminus F} + 1_{F\setminus E} - 1_{E\cap F}</span> and
induction.</p>
<p>This shows <span class="math inline">L</span> is
<em>well-defined</em> for elementary functions.</p>
<p><strong>Exercise</strong>. <em>Given any bounded function <span
class="math inline">g</span> and <span class="math inline">\epsilon &gt;
0</span> there exists an elementary function <span
class="math inline">f</span> with <span class="math inline">\|g - f\|
&lt; \epsilon</span></em>.</p>
<p><em>Hint</em>: Let <span class="math inline">a_n =
f(n\epsilon)</span> and <span class="math inline">A_n =
f^{-1}([n\epsilon, (n + 1)\epsilon))</span>.</p>
<p>This shows the set of elementary functions is <em>dense</em> in <span
class="math inline">B(S)</span>. We can extend the definition from
elementary functions to all of <span class="math inline">B(S)</span>
since <span class="math inline">L</span> is bounded</p>
<p><strong>Exercise</strong>: <em>If <span class="math inline">f\in
B(S)</span> and <span class="math inline">\lim_n f_n = f</span> then
<span class="math inline">\lim_n Lf_n = Lf</span></em>.</p>
<p><em>Hint</em> Use <span class="math inline">L</span> is bounded.</p>
<p>This defines the <em>integral</em> <span class="math inline">Lf =
\int_S f\,d\lambda</span>.</p>
<p>We can define a norm on <span class="math inline">ba(S)</span> by
<span class="math inline">\|\lambda\| = \sup_{\{A_j\}}
|\lambda(A_j)|</span> where the supremum is over all pairwise disjoint
subsets of <span class="math inline">S</span>.</p>
<p><strong>Exercise</strong>. <em>Show <span
class="math inline">\|\lambda\| = \|L\|</span></em>.</p>
<p>If <span class="math inline">S</span> is finite then <span
class="math inline">B(S)</span> can be identified with <span
class="math inline">\boldsymbol{R}^S = \{f\colon
S\to\boldsymbol{R}\}</span> where <span
class="math inline">s\mapsto  f(s)</span>. Similarly, <span
class="math inline">ba(S)</span> can be identified with <span
class="math inline">\boldsymbol{R}^S = \{\lambda\colon
S\to\boldsymbol{R}\}</span> where <span class="math inline">\{s\}\mapsto
\lambda(\{s\})</span>. This is good news when it comes to computer
implementation, everything is just a finite vector of numbers.</p>
</section>
<section id="probability" class="level3">
<h3>Probability</h3>
<p>The Unified Model does not involve probability, however as an aid to
those schooled in the classical theory we will reconnoiter some
elementary facts.</p>
<p>A <em>probability measure</em> is a positive measure with mass 1. If
<span class="math inline">P</span> is a probability measure on <span
class="math inline">\Omega</span> then any function <span
class="math inline">X\colon\Omega\to\boldsymbol{R}</span> is a
<em>random variable</em>. The <em>expected value</em> of <span
class="math inline">X</span> is <span class="math inline">E[X] =
\int_\Omega X\,dP</span>.</p>
<p>The <em>conditional probability</em> of <span
class="math inline">B</span> given <span class="math inline">A</span> is
<span class="math inline">P(B\mid A) = P(B\cap A)/P(A)</span> for <span
class="math inline">B,A\subseteq\Omega</span>.</p>
<p><strong>Exercise</strong>. <em>Show <span
class="math inline">B\mapsto P(B\mid A)</span> is a probability measure
on <span class="math inline">A</span></em>.</p>
<p>This can be generalized to the conditional expectation of a random
variable given an algebra of sets. We say <span class="math inline">Y =
E[X\mid{\mathcal{A}}]</span> if <span class="math inline">Y</span> is
known given <span class="math inline">{\mathcal{A}}</span> and <span
class="math inline">\int_A Y\,dP = \int_A X\,dP</span> for all <span
class="math inline">A\in{\mathcal{A}}</span>.</p>
<p>If <span class="math inline">X</span> is a random variable and <span
class="math inline">P</span> is a measure we can define the measure
<span class="math inline">XP</span> by <span class="math inline">(XP)(A)
= \int_A X\,dP</span>.</p>
<p><strong>Exercise</strong>. <em>Show <span
class="math inline">XP</span> is a measure</em>.</p>
<p><strong>Exercise</strong> <em>Show if <span class="math inline">X\ge
0</span> and <span class="math inline">E[X] = 1</span> then <span
class="math inline">XP</span> is a probability measure</em>.</p>
<p><em>Hint</em>: Show <span class="math inline">XP</span> is positive
and <span class="math inline">(XP)(\Omega) = 1</span>.</p>
<p><strong>Exercise</strong>. <em>Show <span class="math inline">Y =
E[X|{\mathcal{A}}]</span> if and only if <span
class="math inline">Y(P|_{\mathcal{A}}) =
(XP)|_{\mathcal{A}}</span></em>.</p>
<p><em>Hint</em>: If <span class="math inline">P</span> is a measure on
<span class="math inline">\Omega</span> then <span
class="math inline">P|_{\mathcal{A}}</span> is the restriction of the
measure to <span class="math inline">{\mathcal{A}}</span>.</p>
<p><strong>Exercise</strong>. <em>Show if <span
class="math inline">A</span> is an atom of <span
class="math inline">{\mathcal{A}}</span> then <span
class="math inline">E[X\mid{\mathcal{A}}](A) = \int_A
X\,dP/P(A)</span></em>.</p>
<p>Conditional expectation is the average over each atom.</p>
</details>
<p>Let <span class="math inline">T</span> be the set of trading times,
<span class="math inline">I</span> the set of all market instruments,
<span class="math inline">\Omega</span> the sample space of possible
outcomes, and <span class="math inline">({\mathcal{A}}_t)_{t\in
T}</span> the algebras of sets on <span
class="math inline">\Omega</span> indicating the information available
at each trading time.</p>
</section>
<section id="market" class="level3">
<h3>Market</h3>
<p><em>Price</em> – <span
class="math inline">X_t\colon[{\mathcal{A}}_t]\to\boldsymbol{R}^I</span>,
market prices assuming perfect liquidity.</p>
<p><em>Cash flow</em> – <span
class="math inline">C_t\colon[{\mathcal{A}}_t]\to\boldsymbol{R}^I</span>,
dividends, coupons, margin adjustments for futures.</p>
</section>
<section id="trading" class="level3">
<h3>Trading</h3>
<p><em>Trading Strategy</em> – <span class="math inline">\tau_0 &lt;
\cdots &lt; \tau_n</span>, increasing stopping times and trades <span
class="math inline">\Gamma_j\colon[{\mathcal{A}}_{\tau_j}]\to\boldsymbol{R}^I</span></p>
<p><em>Position</em> – <span class="math inline">\Delta_t = \sum_{\tau_j
&lt; t}\Gamma_j = \sum_{s &lt; t} \Gamma_s</span>, accumulation of
trades <em>not</em> including last.</p>
</section>
<section id="accounting" class="level3">
<h3>Accounting</h3>
<p><em>Value</em> – <span class="math inline">V_t = (\Delta_t +
\Gamma_t)\cdot X_t</span>, mark-to-market existing positions and last
trade at current prices.</p>
<p><em>Account</em> – <span class="math inline">A_t = \Delta_t\cdot C_t
- \Gamma_t\cdot X_t</span>, receive cash flows proportional to existing
positions and pay for trades just executed.</p>
</section>
<section id="arbitrage" class="level3">
<h3>Arbitrage</h3>
<p><em>Arbitrage</em> exists if there is a trading strategy with <span
class="math inline">A_{\tau_0} &gt; 0</span>, <span
class="math inline">A_t \ge 0</span>, <span class="math inline">t &gt;
\tau_0</span>, and <span class="math inline">\sum_j \Gamma_j = 0</span>.
The first trade makes money and subsequent trades never lose money.
Eventually the position must close out. Otherwise you could simply
borrow a dollar every day. A strategy Nick Leeson used to put Barings
out of their 350 year old business.</p>
<p>The Fundamental Theorem of Asset Pricing states there is no arbitrage
if and only if there exist <em>deflators</em>, positive measures <span
class="math inline">D_t</span> on <span
class="math inline">{\mathcal{A}}_t</span>, <span
class="math inline">{t\in T}</span>, with <span class="math display">
\tag{1} X_t D_t = (X_u D_u + \sum_{t &lt; s \le u} C_s
D_s)|_{{\mathcal{A}}_t}
</span> A <em>martingale measure</em> satisfies <span
class="math inline">M_t = M_u|{\mathcal{A}}_t</span> for <span
class="math inline">t \le u</span>. Note if cash flows are zero then
deflated prices are a martingale measure. If there are a finite number
of cash flows then prices are determined by deflated future cash
flows.</p>
<p><strong>Lemma</strong>. If <span class="math inline">X_t D_t = M_t -
\sum_{s\le t} C_s D_s</span> where <span class="math inline">M_t</span>
is a martingale measure then there is no arbitrage.</p>
<p><em>Proof</em>: Replace <span class="math inline">X_u D_u</span> by
<span class="math inline">M_u - \sum_{s\le u} C_s D_s</span> in equation
(1).</p>
<p><strong>Lemma</strong>. For any arbitrage free model and any trading
strategy <span class="math display">
\tag{2} V_t D_t = (V_u D_u + \sum_{t &lt; s \le u} A_s
D_s)|_{{\mathcal{A}}_t}
</span></p>
<p><em>Proof</em>. Use <span class="math inline">\Delta_t + \Gamma_t =
\Delta_{t + \epsilon}</span> if <span class="math inline">\epsilon &gt;
0</span> is sufficiently small.</p>
<p>Note how the value <span class="math inline">V_t</span> corresponds
to price <span class="math inline">X_t</span> and account <span
class="math inline">A_t</span> corresponds to <span
class="math inline">C_t</span> in equations (2) and (1) respectively.
Trading strategies create synthetic market instruments.</p>
<p><strong>Equations (1) and (2) are the skeleton keys to pricing
derivative securities</strong>.</p>
</section>
</section>
<section id="application" class="level2">
<h2>Application</h2>
<p>Suppose a derivative security specifies amounts <span
class="math inline">\overline{A}_j</span> be paid at times <span
class="math inline">\overline{\tau}_j</span>. If there is a trading
strategy <span class="math inline">(\tau_j, \Gamma_j)</span> with <span
class="math inline">A_{\overline{\tau}_j} = \overline{A}_j</span> for
all <span class="math inline">j</span> and <span class="math inline">A_t
= 0</span> otherwise (aka self-financing) then a “perfect hedge”
exists<a href="#fn2" class="footnote-ref" id="fnref2"
role="doc-noteref"><sup>2</sup></a>.</p>
<p>Note <span class="math inline">V_t D_t = (\sum_{\tau_j &gt; t}
\overline{A}_j D_{\overline{\tau}_j})|_{{\mathcal{A}}_t}</span> can be
computed from the derivative contract term sheet and the deflators <span
class="math inline">D_t</span>. Since we also have <span
class="math inline">V_t = (\Delta_t + \Gamma_t)\cdot X_t</span>, the
Frechet derivative <span class="math inline">D_{X_t}V_t</span> of option
value with respect to <span class="math inline">X_t</span> is <span
class="math inline">\Delta_t + \Gamma_t</span> so <span
class="math inline">\Gamma_t = D_{X_t}V_t - \Delta_t</span>. Since <span
class="math inline">\Delta_t</span> is known at time <span
class="math inline">t</span>, this gives a recipe for computing a
trading strategy. Delta is <span class="math inline">\Delta</span> and
gamma is <span class="math inline">\Gamma</span> in the customary sense
used by traders. In general this hedge will not exactly replicate the
derivative contract obligation.</p>
<p>The Unified Model does not prescribe <em>when</em> the hedge should
be executed. This is an important unsolved fundamental problem in the
theory of Mathematical Finance. The untenable Black-Scholes/Merton
solution is to hedge “continuously”. Every trading strategy executed in
the real world involves only a finite number of trades.</p>
<p>One simply writes down a martingale and deflator then uses equation
(2) to value, hedge, and manage the risk of derivative securities.</p>
<section id="black-scholesmerton" class="level3">
<h3>Black-Scholes/Merton</h3>
<p>The Black-Scholes/Merton model uses <span class="math inline">{M_t =
(r, s\exp(\sigma B_t - \sigma^2t/2))P}</span>, where <span
class="math inline">B_t</span> is Brownian motion, <span
class="math inline">P</span> is Wiener measure, and the deflator is
<span class="math inline">D_t = \exp(-\rho t)P</span>. The model of
prices is is <span class="math inline">X_t = (R_t, S_t) = \exp(\rho
t)M_t</span> and the cash flows are zero.</p>
<p>A European put option with strike <span class="math inline">k</span>
and expriataton <span class="math inline">t</span> has a single cash
flow of <span class="math inline">\max\{k - S_t, 0\}</span> at time
<span class="math inline">t</span>. By equation (2) it has value <span
class="math inline">(\max\{k - S_t, 0\}D_t)(\Omega) = \exp(-\rho
t)E[\max\{k - S_t, 0\}]</span>, same as Black-Scholes/Merton but with
far less mathematical machinery.</p>
<p>More generally, if <span class="math inline">X_t</span> is a Levy
process where <span class="math inline">X_1</span> has mean zero and
variance one then <span class="math inline">{M_t = (r, s\exp(\sigma X_t
- \kappa_t(\sigma)))P}</span> is an arbitrage-free model, where <span
class="math inline">\kappa_t(\sigma) = \log E[\exp(\sigma X_t)]</span>
is the cumulant. Merton’s jump diffusion model is a special case.</p>
<p>Every positive random variable with finite mean and log variance can
be written <span class="math inline">{F = f\exp(sX - \kappa(s))}</span>
where <span class="math inline">{f = E[F]}</span>, <span
class="math inline">{s^2 = \operatorname{Var}(\log F)}</span>, <span
class="math inline">X</span> has mean zero and variance 1, and <span
class="math inline">{\kappa(s) = \log E[\exp(sX)]}</span>.</p>
<p>We have <span class="math display">
\begin{aligned}
E[\max\{k - F, 0\}] &amp;= E[(k - F)1(F \le k)] \\
    &amp;= kP(F\le k) - E[F 1(F\le k)] \\
    &amp;= kP(F\le k) - E[F] E[F/E[F] 1(F\le k)] \\
    &amp;= kP(F\le k) - fP^*(F\le k) \\
\end{aligned}
</span> where <span class="math inline">dP^*/dP = F/E[F]</span>.</p>
<p><strong>Exercise</strong>. <em>If <span class="math inline">X</span>
is standard normal show <span class="math inline">{E[\max\{k - F, 0\}] =
kN(m) - fN(m - s)}</span> where <span class="math inline">N</span> is
the standard normal cumulative distribution and <span
class="math inline">m = (\log(k/f) + s^2/2)/s</span></em>.</p>
<p><em>Hint</em>: Use <span class="math inline">E[\exp(N)] = \exp(E[N] +
\operatorname{Var}(N)/2)</span> if <span class="math inline">N</span> is
normal and <span class="math inline">E[\exp(N) g(M)] = E[\exp(N)] E[g(M
+ \operatorname{Cov}(M,N))]</span> if <span class="math inline">N</span>
and <span class="math inline">M</span> are jointly normal.</p>
<p><strong>Exercise</strong>. <em>Show in general <span
class="math inline">E[{\max\{k - F, 0\}] = kP(X\le m) - fP^*(X\le
m)}</span> for any positive <span class="math inline">F</span> where
<span class="math inline">{m = (\log(k/f) + \kappa(s))/s}</span> and
<span class="math inline">dP^*/dP = \exp(sX -
\kappa(s))</span></em>.</p>
<p><em>Delta</em> is derivative of value <span class="math inline">v =
E[\max\{k - F, 0\}]</span> with respect to initial price. <span
class="math display">
\begin{aligned}
    \partial v/\partial f &amp;= E[-1(F \le k)\partial F/\partial f] \\
    \partial v/\partial f &amp;= -E[1(F \le k)\exp(sX - \kappa(s))] \\
        &amp;= -P^*(F \le k) \\
\end{aligned}
</span></p>
<p><strong>Exercise</strong>. <em>If <span class="math inline">X</span>
is standard normal show <span class="math inline">P^*(F \le k) =
N(-d_2)</span> where <span class="math inline">{d_2 = (\log f/k -
s^2/2)/s}</span></em>.</p>
<p>Gamma, Vega</p>
</section>
<section id="repurchase-agreements" class="level3">
<h3>Repurchase Agreements</h3>
<p>A <em>repurchase agreement</em> <span
class="math inline">R(f,t,\Delta t)</span> has price <span
class="math inline">X_t^{R(f,t,\Delta t)} = 1</span> at time <span
class="math inline">t</span> and a single cash flow <span
class="math inline">C_{t+\Delta t} = \exp(f\Delta t)</span> at time
<span class="math inline">t + \Delta t</span>. The <em>continuously
compounded forward rate</em> <span class="math inline">f</span> is a
function known at time <span class="math inline">t</span>. In practice,
the forward rate <span class="math inline">r</span> is quoted using a
<em>day count basis</em> and the cash flow is <span
class="math inline">1 + r\delta</span> where <span
class="math inline">\delta</span> is the <em>day count fraction</em>.
Typically, the day count fraction is the number of days from <span
class="math inline">t</span> to <span class="math inline">t + \Delta
t</span> divided by 360 or 365. These are the Actual/360 and Actual/365
day count basis respectively.</p>
</section>
<section id="deflator" class="level3">
<h3>Deflator</h3>
<p>If repurchase agreements are available then a <em>canonical
deflator</em> exists. A repurchase agreement over the interval <span
class="math inline">[t_j, t_{j+1}]</span> is specified by a rate <span
class="math inline">f_j</span> known at time <span
class="math inline">t_j</span>. The price at <span
class="math inline">t_j</span> is <span class="math inline">1</span> and
it has a cash flow of <span class="math inline">{\exp(f_j(\Delta
t_j))}</span> at time <span class="math inline">t_{j+1}</span> where
<span class="math inline">\Delta t_j = t_{j+1} - t_j</span>. By equation
(1) we have <span class="math inline">{D_j = \exp(f_j\Delta
t_j)D_{j+1}|_{{\mathcal{A}}_j}}</span>. If <span
class="math inline">D_{j+1}</span> is known at time <span
class="math inline">t_j</span> then <span class="math inline">{D_{j+1} =
\exp(-f_j\Delta t_j)D_j}</span> and <span class="math inline">{D_n =
\exp(-\sum_{j &lt; n} f_j\Delta t_j) D_{t_0}}</span> is the canonical
deflator at time <span class="math inline">t_n</span>.</p>
<p>The continuous time analog is <span class="math inline">D_t =
\exp(-\int_0^t f(s)\,ds)D_0</span> where <span
class="math inline">f</span> is the continuously compounded
instantaneous forward rate.</p>
</section>
<section id="zero-coupon-bond" class="level3">
<h3>Zero Coupon Bond</h3>
<p>A <em>zero coupon bond</em> maturing at time <span
class="math inline">u</span> has a single unit cash flow at <span
class="math inline">u</span>, <span class="math inline">C_u^{D(u)} =
1</span> and <span class="math inline">C_t^{D(u)} = 0</span> for <span
class="math inline">t\not=u</span>. In an arbitrage free model its price
at time <span class="math inline">t\le u</span>, <span
class="math inline">X_t^{D(u)} = D_t(u)</span>, satisfies <span
class="math inline">D_t(u) D_t = D_u|_{{\mathcal{A}}_t}</span> so <span
class="math inline">D_t(u)</span> is the Radon-Nikodym derivative of
<span class="math inline">D_u|_{{\mathcal{A}}_t}</span> with respect to
<span class="math inline">D_t</span>. Zero coupon bond prices are
determined by the deflators.</p>
<p>A <em>fixed income</em> instrument is a portfolio of zero coupon
bonds. If a bond pays <span class="math inline">c_j</span> at time <span
class="math inline">t_j</span> its present value at time <span
class="math inline">t</span> is <span class="math display">
    P_t = \sum_{t_j &gt; t} c_j D_t(u_j).
</span></p>
</section>
<section id="forward-rate-agreement" class="level3">
<h3>Forward Rate Agreement</h3>
<p>A <em>forward rate agreement</em> with coupon <span
class="math inline">f</span> over the interval <span
class="math inline">[u,v]</span> having day count convention <span
class="math inline">\delta</span><a href="#fn3" class="footnote-ref"
id="fnref3" role="doc-noteref"><sup>3</sup></a> has two cash flows:
<span class="math inline">-1</span> at time <span
class="math inline">t</span> and <span class="math inline">{1 +
f\delta(u,v)}</span> at time <span class="math inline">u</span>. The
<em>par forward coupon</em> at time <span class="math inline">t</span>,
<span class="math inline">{F_t^\delta(u,v)}</span>, is the coupon for
which the price is 0 at time <span class="math inline">t</span>. By
equation (1) we have <span class="math inline">{0 = (-D_u + (1 +
F_t^\delta(u,v))D_v|_{{\mathcal{A}}_t}}</span> so <span
class="math display">
    F_t^\delta(u,v) = \frac{1}{\delta(u,v)}\left(\frac{D_t(u)}{D_t(v)} -
1\right).
</span></p>
<p>A <em>swap</em> is a collection of back-to-back forward rate
agreements involving times <span class="math inline">(t_j)</span>. The
<em>swap par coupon</em> making the price 0 at time <span
class="math inline">t</span> is <span class="math display">
    F_t^\delta(t_0,\dots,t_n) = \frac{D_t(t_0) -
D_t(t_n)}{\sum_{j=1}^n\delta(t_{j-1},t_j)D_t(t_j)}.
</span></p>
<p><strong>Exercise</strong>. <em>Show if <span class="math inline">n =
2</span> the swap par coupon is the same as the par forward
coupon</em>.</p>
<p>Some swaps involve an exchange of notional amounts. If a swap has
cash flows <span class="math inline">-1</span> at <span
class="math inline">t_0</span>, <span
class="math inline">f\delta(t_{i-1},t_i)</span> at <span
class="math inline">t_i</span> for <span class="math inline">1 &lt; i
&lt; n</span>, and <span class="math inline">1 +
f\delta(t_{n-1},t_n)</span> at <span class="math inline">t_n</span> then
the value of <span class="math inline">f</span> making the price zero at
time <span class="math inline">t</span> is equal to the swap par
coupon.</p>
<p><strong>Exercise</strong>. <em>Show <span class="math inline">f =
F_t^\delta(t_0,\dots,t_n)</span> makes the price zero</em>.</p>
</section>
<section id="risky-bonds" class="level3">
<h3>Risky Bonds</h3>
<p>Companies can default and may pay only a fraction of the notional
owed on bonds they issued. A simple model<a href="#fn4"
class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> for
this is to assume the time of default <span class="math inline">T</span>
and recovery <span class="math inline">R</span> are random variables.
The sample space for the default time is <span
class="math inline">[0,\infty)</span> indicating the time of default.
The information available at time <span class="math inline">t</span> is
the partition consisting of singletons <span
class="math inline">\{s\}</span>, <span class="math inline">s &lt;
t</span> and the set <span class="math inline">[t, \infty)</span>. If
default occurs prior to <span class="math inline">t</span> then we know
exactly when it happened. If default has not occurred by time <span
class="math inline">t</span> then we only know it can occur any time
after that.</p>
<p>The cash flows for a risky bond <span
class="math inline">D^{T,R}(u)</span> are 1 at time <span
class="math inline">u</span> if <span class="math inline">T &gt;
t</span> and <span class="math inline">RD_T</span> at time <span
class="math inline">T</span> if <span class="math inline">T \le
t</span>. For the model to be arbitrage-free we must have <span
class="math display">
    D_t^{R,T}(u) D_t = \bigl(1(T &gt; u)D_u + 1(T\le u)R
D_T\bigr)|_{{\mathcal{A}}_t}.
</span> Note if <span class="math inline">T = \infty</span> or <span
class="math inline">R = 1</span> then <span
class="math inline">{D_t^{R,T}(u) = D_t(u)}</span>.</p>
<p>If the deflators are independent of the stopping time and recovery is
<span class="math inline">RD_T(u)</span> at <span
class="math inline">T\le u</span> for some constant <span
class="math inline">R</span> then using <span
class="math inline">D_T(u)D_T = D_u|_{{\mathcal{A}}_T}</span> for <span
class="math inline">T \le u</span> we have <span class="math display">
    D_t^{T,R}(u) D_t P(T &gt; t) = \bigl(P(T &gt; u) + R P(t &lt; T \le
u)\bigr)D_u|_{{\mathcal{A}}_t}
</span> The <em>credit spread</em> <span
class="math inline">\lambda_t^{T,R}(u)</span> is defined by <span
class="math inline">{D_t^{T,R}(u) = D_t(u)\exp(-\lambda_t^{T,R}(u) (u -
t))}</span>. In the above case <span class="math display">
    \lambda_t^{T,R}(u) = -\frac{\log(P(T &gt; u) + R P(t &lt; T \le
u))}{u - t}.
</span></p>
</section>
<section id="limit-orders" class="level3">
<h3>Limit Orders</h3>
<p>A limit order is a contract to buy or sell an instrument at a given
level. We assume a money market instrument with price <span
class="math inline">R_t</span> exists and the price of the underlying
instrument is <span class="math inline">S_t</span>. A limit <em>buy
order</em> has price 0 and and each contract has a single cash flow of
<span class="math inline">C_\tau = (-L, 1)</span> in the money market
and instrument where <span class="math inline">\tau</span> is the first
time the price of the instrument hits level <span
class="math inline">L</span>. This effectively purchases one share of
stock for price <span class="math inline">L</span> at time <span
class="math inline">\tau</span>.</p>
<!--
### Binomial Model

Let $W_n$ be (symmetric) random walk. The model for bond and stock is

$V_0 = E[\nu(S_n)]$

$\Gamma = (M, N)$.
-->
</section>
</section>
<section id="reference" class="level2 unnumbered">
<h2 class="unnumbered">Reference</h2>
<div id="refs" class="references csl-bib-body hanging-indent"
data-entry-spacing="0" role="list">
<div id="ref-BlaSch1973" class="csl-entry" role="listitem">
Black, Fischer, and Myron Scholes. 1973. <span>“The Pricing of Options
and Corporate Liabilities.”</span> <em>Journal of Political Economy</em>
81 (3): 637–54. <a
href="http://www.jstor.org/stable/1831029">http://www.jstor.org/stable/1831029</a>.
</div>
<div id="ref-Mer1973" class="csl-entry" role="listitem">
Merton, Robert C. 1973. <span>“Theory of Rational Option
Pricing.”</span> <em>Bell Journal of Economics and Management
Science</em> 4 (1): 141–83. <a
href="https://www.jstor.org/stable/3003143">https://www.jstor.org/stable/3003143</a>.
</div>
<div id="ref-Ros1978" class="csl-entry" role="listitem">
Ross, Stephen A. 1978. <span>“A <span>Simple</span>
<span>Approach</span> to the <span>Valuation</span> of
<span>Risky</span> <span>Streams</span>.”</span> <em>The Journal of
Business</em> 51 (3): 453–75. <a
href="https://www.jstor.org/stable/2352277">https://www.jstor.org/stable/2352277</a>.
</div>
</div>
</section>
<section id="footnotes" class="footnotes footnotes-end-of-document"
role="doc-endnotes">
<hr />
<ol>
<li id="fn1"><p>Merton provided a closed form solution for valuing
barrier options based on the reflection principal of Brownian motion.
<span class="citation"
data-cites="cite">(<strong>cite?</strong>)</span>. The classical theory
implies the value of a barrier option that knocks in or out the second
time the barrier is hit has the same value. It also implies the value of
a barrier option that knocks in or out the millionth time it hits the
barrier has exactly the same value.<a href="#fnref1"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Perfect hedges never exist.<a href="#fnref2"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>The <em>day count fraction</em> <span
class="math inline">\delta(u, v)</span> is approximately <span
class="math inline">v - u</span> in years.<a href="#fnref3"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>This is a very simplified model.<a href="#fnref4"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>
</body>
</html>
