<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Keith A. Lewis" />
  <title>Simplified Trading</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    /* CSS for citations */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
    }
    .hanging-indent div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }  </style>
  <link rel="stylesheet" href="math.css" />
  <script defer=""
  src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: true
   });
}}});
  </script>
  <link rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" />
</head>
<body>
<header id="title-block-header">
<h1 class="title">Simplified Trading</h1>
<p class="author">Keith A. Lewis</p>
<p class="date">Mar 1, 2026</p>
<div class="abstract">
<div class="abstract-title">Abstract</div>
Market, Trading, Accounting
</div>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#market" id="toc-market">Market</a></li>
<li><a href="#trading" id="toc-trading">Trading</a></li>
<li><a href="#accounting" id="toc-accounting">Accounting</a></li>
<li><a href="#money-market-and-stock"
id="toc-money-market-and-stock">Money Market and Stock</a></li>
<li><a href="#application" id="toc-application">Application</a></li>
<li><a href="#derivative" id="toc-derivative">Derivative</a>
<ul>
<li><a href="#european" id="toc-european">European</a></li>
</ul></li>
<li><a href="#references" id="toc-references">References</a></li>
</ul>
</nav>
<p>Trading is buying and selling market instruments that have prices and
cash flows associated with instrument ownership, then accounting for the
values and amounts involved. This note only considers the simple case
where there is perfect liquidity and prices can be any real number. In
actual trading there is a bid-ask spread, depending on whether you are
selling or buying, that tends to increases along with the size of the
trade. Prices can only be integral multiples of the minimum tick size of
the instrument. We completely ignore credit considerations of the
counterparties involved.</p>
<section id="market" class="level2">
<h2>Market</h2>
<p>Instruments <span class="math inline">I</span> have <span
class="math inline">\boldsymbol{{R}}^I = \{x\colon
I\to\boldsymbol{{R}}\}</span><a href="#fn1" class="footnote-ref"
id="fnref1" role="doc-noteref"><sup>1</sup></a> valued prices <span
class="math inline">(X_t)_{t\in T}</span> and cash flows <span
class="math inline">(C_t)_{t\in T}</span> at trading times <span
class="math inline">T</span>. Only a finite number of cash flows (e.g.,
stock dividends, bond coupons, futures margin adjustments) are not
zero.</p>
</section>
<section id="trading" class="level2">
<h2>Trading</h2>
<p>A trading strategy is a finite number of increasing stopping times
<span class="math inline">\tau_0 &lt; \cdots &lt; \tau_n</span> and
<span class="math inline">\boldsymbol{{R}}^I</span> valued trades <span
class="math inline">\Gamma_j</span> done at <span
class="math inline">\tau_j</span>. Trades accumulate to positions <span
class="math inline">\Delta_t = \sum_{\tau_j &lt; t} \Gamma_j = \sum_{s
&lt; t} \Gamma_s</span>. Note the strict inequality. It takes some time
for trades to settle.</p>
</section>
<section id="accounting" class="level2">
<h2>Accounting</h2>
<p>The value (or mark-to-market) of a trading account is the cash value
of liquidating existing positions and trades just done at current market
prices: <span class="math inline">V_t = (\Delta_t + \Gamma_t)\cdot
X_t</span>. The amount appearing at time <span class="math inline">t\in
T</span> in the trading account is all cash flows proportional to
existing position minus the cost of the trades just executed: <span
class="math inline">A_t = \Delta_t\cdot C_t - \Gamma_t\cdot
X_t</span>.</p>
</section>
<section id="money-market-and-stock" class="level2">
<h2>Money Market and Stock</h2>
<p>We consider the case of a money market instrument and stock <span
class="math inline">X_t = (R_t, S_t)</span>. For simplicity we assume
cash flows are zero. The trade <span class="math inline">\Gamma_t =
(M_t, N_t)</span> is how much of the money market and stock is purchased
at time <span class="math inline">t</span>. We write <span
class="math inline">\Delta_t = (\backslash M_t, \backslash N_t)</span>
where backslash is read as <a
href="https://en.cppreference.com/w/cpp/algorithm/partial_sum.html">partial
sum</a> or <a
href="https://support.microsoft.com/en-us/office/scan-function-d58dfd11-9969-4439-b2dc-e7062724de29">scan</a>.
The <a
href="https://en.cppreference.com/w/cpp/algorithm/adjacent_difference.html">adjacent
difference</a> of <span class="math inline">(x_0,\ldots, x_n)</span> is
<span class="math inline">(x_0, x_1 - x_0, \ldots x_n -
x_{n-1})</span>.</p>
<p><strong>Excercise</strong>. <em>Show the partial sum of adjacent
differences is the identity function</em>.</p>
</section>
<section id="application" class="level2">
<h2>Application</h2>
<p>An <em>elementary trade</em> is buying <span
class="math inline">\Gamma</span> shares at <span
class="math inline">\tau_0</span> and selling <span
class="math inline">\Gamma</span> shares at <span
class="math inline">\tau_1 &gt; \tau_0</span>. For a bond and a stock
<span class="math inline">\Gamma_0 = (M, N)</span> and <span
class="math inline">\Gamma_1 = -\Gamma_0 = (-M, -N)</span>. Money market
accounts never have cash flows. We assume the stock has no dividends so
<span class="math inline">C_t = (0,0)</span>. In this case <span
class="math inline">A_t = -\Gamma_t\cdot X_t</span>.</p>
<table>
<colgroup>
<col>
<col>
<col>
<col>
<col>
<col>
<col>
<col style="width:18%">
<col style="width:18%">
</colgroup>
<thead>
<tr>
<td>
</td>
<td colspan="2">
<span class="math inline">X</span>
</th>
<td colspan="2">
<span class="math inline">\Gamma</span>
</th>
<td colspan="2">
<span class="math inline">\Delta</span>
</th>
<td>
<span class="math inline">(\Delta + \Gamma)\cdot X</span>
</td>
<td>
<span class="math inline">-\Gamma\cdot X</span>
</td>
</tr>
<tr>
<td>
<span class="math inline">t</span>
</td>
<td>
<span class="math inline">R</span>
</td>
<td>
<span class="math inline">S</span>
</td>
<td>
<span class="math inline">M</span>
</td>
<td>
<span class="math inline">N</span>
</td>
<td>
<span class="math inline">\backslash M</span>
</td>
<td>
<span class="math inline">\backslash N</span>
</td>
<td>
<span class="math inline">V</span>
</td>
<td>
<span class="math inline">A</span>
</td>
</tr>
</thead>
<tbody>
<tr>
<td>
<span class="math inline">[0, \tau_0)</span>
</td>
<td>
<span class="math inline">R_t</span>
</td>
<td>
<span class="math inline">S_t</span>
</td>
<td>
<span class="math inline">0</span>
</td>
<td>
<span class="math inline">0</span>
</td>
<td>
<span class="math inline">0</span>
</td>
<td>
<span class="math inline">0</span>
</td>
<td>
<span class="math inline">0</span>
</td>
<td>
<span class="math inline">0</span>
</td>
</tr>
<tr>
<td>
<span class="math inline">\tau_0</span>
</td>
<td>
<span class="math inline">R_0</span>
</td>
<td>
<span class="math inline">S_0</span>
</td>
<td>
<span class="math inline">M</span>
</td>
<td>
<span class="math inline">N</span>
</td>
<td>
<span class="math inline">0</span>
</td>
<td>
<span class="math inline">0</span>
</td>
<td>
<span class="math inline">MR_0 + NS_0</span>
</td>
<td>
<span class="math inline">-MR_0 - NS_0</span>
</td>
</tr>
<tr>
<td>
<span class="math inline">(\tau_0, \tau_1)</span>
</td>
<td>
<span class="math inline">R_t</span>
</td>
<td>
<span class="math inline">S_t</span>
</td>
<td>
<span class="math inline">0</span>
</td>
<td>
<span class="math inline">0</span>
</td>
<td>
<span class="math inline">M</span>
</td>
<td>
<span class="math inline">N</span>
</td>
<td>
<span class="math inline">MR_t + NS_t</span>
</td>
<td>
<span class="math inline">0</span>
</td>
</tr>
<tr>
<td>
<span class="math inline">\tau_1</span>
</td>
<td>
<span class="math inline">R_1</span>
</td>
<td>
<span class="math inline">S_1</span>
</td>
<td>
<span class="math inline">-M</span>
</td>
<td>
<span class="math inline">-N</span>
</td>
<td>
<span class="math inline">M</span>
</td>
<td>
<span class="math inline">N</span>
</td>
<td>
<span class="math inline">0</span>
</td>
<td>
<span class="math inline">MR_1 + NS_1</span>
</td>
</tr>
<tr>
<td>
<span class="math inline">(\tau_1, \infty)</span>
</td>
<td>
<span class="math inline">R_t</span>
</td>
<td>
<span class="math inline">S_t</span>
</td>
<td>
<span class="math inline">0</span>
</td>
<td>
<span class="math inline">0</span>
</td>
<td>
<span class="math inline">0</span>
</td>
<td>
<span class="math inline">0</span>
</td>
<td>
<span class="math inline">0</span>
</td>
<td>
<span class="math inline">0</span>
</td>
</tr>
</tbody>
</table>
<p>There is no activity prior to the first trade. The initial trade of
<span class="math inline">M</span> in the money market and <span
class="math inline">N</span> in the stock costs <span
class="math inline">MR_0 + NS_0</span> and is equal to the value of the
position. When the trades settle the position becomes <span
class="math inline">\Delta = (M,N)</span> and its value is <span
class="math inline">MR_t + NS_t</span> until the position is closed out
by trading <span class="math inline">\Gamma = (-M, -N)</span>.</p>
<p>We can eliminate all but the <span class="math inline">\tau_j</span>
rows by replacing the position <span class="math inline">\Delta</span>
column with <span class="math inline">\Delta + \Gamma</span>, the
position that occurs after the trade has settled.</p>
<table>
<colgroup>
<col>
<col>
<col>
<col>
<col>
<col>
<col>
<col style="width:18%">
<col style="width:18%">
</colgroup>
<thead>
<tr>
<td>
</td>
<td colspan="2">
<span class="math inline">X</span>
</th>
<td colspan="2">
<span class="math inline">\Gamma</span>
</th>
<td colspan="2">
<span class="math inline">\Delta + \Gamma</span>
</th>
<td>
<span class="math inline">(\Delta + \Gamma)\cdot X</span>
</td>
<td>
<span class="math inline">-\Gamma\cdot X</span>
</td>
</tr>
<tr>
<td>
<span class="math inline">t</span>
</td>
<td>
<span class="math inline">R</span>
</td>
<td>
<span class="math inline">S</span>
</td>
<td>
<span class="math inline">M</span>
</td>
<td>
<span class="math inline">N</span>
</td>
<td>
<span class="math inline">\backslash M</span>
</td>
<td>
<span class="math inline">\backslash N</span>
</td>
<td>
<span class="math inline">V</span>
</td>
<td>
<span class="math inline">A</span>
</td>
</tr>
</thead>
<tbody>
<tr>
<td>
<span class="math inline">\tau_0</span>
</td>
<td>
<span class="math inline">R_0</span>
</td>
<td>
<span class="math inline">S_0</span>
</td>
<td>
<span class="math inline">M</span>
</td>
<td>
<span class="math inline">N</span>
</td>
<td>
<span class="math inline">M</span>
</td>
<td>
<span class="math inline">N</span>
</td>
<td>
<span class="math inline">MR_0 + NS_0</span>
</td>
<td>
<span class="math inline">-MR_0 - NS_0</span>
</td>
</tr>
<tr>
<td>
<span class="math inline">\tau_1</span>
</td>
<td>
<span class="math inline">R_1</span>
</td>
<td>
<span class="math inline">S_1</span>
</td>
<td>
<span class="math inline">-M</span>
</td>
<td>
<span class="math inline">-N</span>
</td>
<td>
<span class="math inline">0</span>
</td>
<td>
<span class="math inline">0</span>
</td>
<td>
<span class="math inline">0</span>
</td>
<td>
<span class="math inline">MR_1 + NS_1</span>
</td>
</tr>
</tbody>
</table>
<p>A forward contact on the stock pays <span class="math inline">S_1 -
f</span> at <span class="math inline">\tau_1</span>. To replicate this
using the bond and stock we require <span class="math inline">A_1 = S_1
- f = MR_1 + NS_1</span>. This is satisfied by taking <span
class="math inline">N = 1</span> and <span class="math inline">MR_1 =
-f</span>. The cost of setting up this hedge is <span
class="math inline">A_0 = fR_0/R_1 - S_0</span>. The initial cost is
zero when <span class="math inline">f = S_0R_1/R_0</span>, which is the
standard cost-of-carry formula.</p>
<p>This can be extended to any closed out trading strategy <span
class="math inline">(\tau_j, \Gamma_j)</span> with <span
class="math inline">\sum_j \Gamma_j = 0</span>.</p>
<table>
<colgroup>
<col>
<col>
<col>
<col style="width:12%">
<!-- 4 -->
<col style="width:12%">
<!-- 5 -->
<col style="width:11%">
<col style="width:10%">
<col style="width:20%">
<col style="width:20%">
</colgroup>
<thead>
<!--
<tr>
<td></td>
<td colspan="2">$X$</th>
<td colspan="2">$\Gamma$</th>
<td colspan="2">$\Delta + \Gamma$</th>
<td>$(\Delta + \Gamma)\cdot X$</td>
<td>$-\Gamma\cdot X$</td>
</tr>
-->
<tr>
<th>
<span class="math inline">t</span>
</th>
<th>
<span class="math inline">R</span>
</th>
<th>
<span class="math inline">S</span>
</th>
<th>
<span class="math inline">M</span>
</th>
<th>
<span class="math inline">N</span>
</th>
<th>
<span class="math inline">\backslash M</span>
</th>
<th>
<span class="math inline">\backslash N</span>
</th>
<th>
<span class="math inline">V</span>
</th>
<th>
<span class="math inline">A</span>
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<span class="math inline">\tau_0</span>
</td>
<td>
<span class="math inline">R_0</span>
</td>
<td>
<span class="math inline">S_0</span>
</td>
<td>
<span class="math inline">M_0</span>
</td>
<td>
<span class="math inline">N_0</span>
</td>
<td>
<span class="math inline">M_0</span>
</td>
<td>
<span class="math inline">N_0</span>
</td>
<td>
<span class="math inline">R_0 M_0 + N_0 S_0</span>
</td>
<td>
<span class="math inline">-R_0 M_0 - N_0 S_0</span>
</td>
</tr>
<tr>
<td>
<span class="math inline">\tau_1</span>
</td>
<td>
<span class="math inline">R_1</span>
</td>
<td>
<span class="math inline">S_1</span>
</td>
<td>
<span class="math inline">M_1</span>
</td>
<td>
<span class="math inline">N_1</span>
</td>
<td>
<span class="math inline">M_0 + M_1</span>
</td>
<td>
<span class="math inline">N_0 + N_1</span>
</td>
<td>
<span class="math inline">(M_0 + M_1)R_0 + (N_0 + N_1)S_1</span>
</td>
<td>
<span class="math inline">-M_1 R_1 - N_1 S_1</span>
</td>
</tr>
<tr>
<td>
<span class="math inline">\cdots</span>
</td>
<td>
<span class="math inline">\cdots</span>
</td>
<td>
<span class="math inline">\cdots</span>
</td>
<td>
<span class="math inline">\cdots</span>
</td>
<td>
<span class="math inline">\cdots</span>
</td>
<td>
<span class="math inline">\cdots</span>
</td>
<td>
<span class="math inline">\cdots</span>
</td>
<td>
<span class="math inline">\cdots</span>
</td>
<td>
<span class="math inline">\cdots</span>
</td>
</tr>
<tr>
<td>
<span class="math inline">\tau_n</span>
</td>
<td>
<span class="math inline">R_n</span>
</td>
<td>
<span class="math inline">S_n</span>
</td>
<td>
<span class="math inline">-\sum_j M_j</span>
</td>
<td>
<span class="math inline">-\sum_j N_j</span>
</td>
<td>
<span class="math inline">0</span>
</td>
<td>
<span class="math inline">0</span>
</td>
<td>
<span class="math inline">0</span>
</td>
<td>
<span class="math inline">R_n\sum_j M_j + S_n\sum_j N_j</span>
</td>
</tr>
</tbody>
</table>
</section>
<section id="derivative" class="level2">
<h2>Derivative</h2>
<p>A <em>derivative instrument</em> is a contract that pays amounts
<span class="math inline">\hat{A}_j</span> at times <span
class="math inline">\hat{\tau}_j</span>. It can be <em>hedged</em> with
the money market account and stock if we can find trades <span
class="math inline">\Gamma_j = (M_j, N_j)</span> with <span
class="math inline">A_j = \hat{A}_j</span>, <span
class="math inline">0\le j\le n</span>. This is usually not possible.
The fundamental problem faced by traders and portfolio managers is when
and how much to trade to minimize risk.</p>
<p>Since <span class="math inline">V_j = (\Delta_j + \Gamma_j)\cdot
X_j</span> a reasonable guess for the positions should be <span
class="math inline">\Delta_j + \Gamma_j = dV_j/dX_j</span>, the usual
delta hedge. The trades are the adjacent difference of positions.</p>
<p>The Fundamental Theorem of Asset Pricing allows us to compute <span
class="math inline">V_t</span> in terms of a linear pricing measure
identified by <span class="citation" data-cites="Ros1978">(Ross
1978)</span>.</p>
<blockquote>
<p>If there are no arbitrage opportunities in a market, then there must
exist a (not generally unique) positive linear operator that can be used
to value all marketed assets.</p>
</blockquote>
<p>Ross showed a market model is arbitrage free if there exist positive
measures <span class="math inline">(D_t)</span> with <span
class="math display">
\tag{1} X_t D_t = (\sum_{t &lt; u \le v} C_u D_u + X_v
D_v)|_{\mathcal{A}_t}
</span> where <span class="math inline">\mathcal{A}_t</span> is the
information available at time <span class="math inline">t</span>. Using
the definitions of <span class="math inline">V_t</span> and <span
class="math inline">A_t</span> we have <span class="math display">
\tag{2} V_t D_t = (\sum_{t &lt; u \le v} A_u D_u + V_v
D_v)|_{\mathcal{A}_t}.
</span> The proof starts with <span class="math inline">V_t D_t =
(\Delta_t + \Gamma_t)X_t D_t</span> and using equation <span
class="math inline">(1)</span> to replace <span class="math inline">X_t
D_t</span>. Note how value <span class="math inline">V_t</span>
corresponds to price <span class="math inline">X_t</span> and amount
<span class="math inline">A_t</span> corresponds to cash flow <span
class="math inline">C_t</span>. This shows <strong>every trading
strategy creates a synthetic market instrument</strong>.</p>
<p>Every arbitrage-free model is parameterized by a martingale measure
<span class="math inline">(M_t)</span> taking values in <span
class="math inline">\boldsymbol{{R}}^I</span> and positive measures
<span class="math inline">(D_t)</span>. Given cash flows <span
class="math inline">(C_t)</span> the prices <span
class="math inline">(X_t)</span> satisfy <span class="math display">
    X_t D_t = X_0 M_t - \sum_{s\le t}C_s D_s.
</span> For example, the Black-Scholes/Merton model is parameterized by
the martingale measure <span class="math inline">M_t = (1, e^{\sigma B_t
- \sigma^2 t/2})P</span> and positive measures <span
class="math inline">D_t = e^{-\rho t}P</span> where <span
class="math inline">P</span> is Wiener measure and <span
class="math inline">B_t</span> is standard Brownian motion. Ross showed
there is no need for the partial differential equations arising from
Ito’s formula and generalized their result to any collection of
instruments, not just a bond, stock, and option.</p>
<section id="european" class="level3">
<h3>European</h3>
<p>A European option has only one cash flow at expiration. In this case
we need <span class="math inline">A_j = 0</span> for <span
class="math inline">0 &lt; j &lt; n</span> and <span
class="math inline">A_n</span> equal to the option payoff. The amount
for setting up the initial hedge is <span class="math inline">A_0 =
-V_0</span>. Since <span class="math inline">V_0 = M_0 R_0 + N_0
S_0</span> we have <span class="math inline">M_0 = (V_0 - N_0
S_0)/R_0</span>. Given stock trades <span
class="math inline">N_j</span>, <span class="math inline">0\le j &lt;
n</span> the condition <span class="math inline">A_j = 0</span> holds
when <span class="math inline">M_j = -N_j S_j/R_j</span>, <span
class="math inline">0 &lt; j &lt; n</span>. Since the positions close
out we have <span class="math inline">A_n = -M_n R_n - N_n S_n =
(\sum_{j=0}^{n-1} M_j)R_n + (\sum_{j=0}^{n-1} N_j)S_n</span>.</p>
<!--
min_M,N \|A_1 - MR_1 - NS_1\|^2
-->
</section>
</section>
<section id="references" class="level2 unnumbered">
<h2 class="unnumbered">References</h2>
<div id="refs" class="references csl-bib-body hanging-indent"
role="list">
<div id="ref-Ros1978" class="csl-entry" role="listitem">
Ross, Stephen A. 1978. <span>“A Simple Approach to the Valuation of
Risky Streams.”</span> <em>The Journal of Business</em> 51 (3): 453–75.
<a
href="https://www.jstor.org/stable/2352277">https://www.jstor.org/stable/2352277</a>.
</div>
</div>
</section>
<aside id="footnotes" class="footnotes footnotes-end-of-document"
role="doc-endnotes">
<hr />
<ol>
<li id="fn1"><p>Let <span class="math inline">\boldsymbol{{n}} =
\{1,\ldots,n\}</span>. The standard definition <span
class="math inline">\boldsymbol{{R}}^n = \{(x_1,\ldots,x_n)\mid
x_j\in\boldsymbol{{R}}\}</span> can be identified with all functions
<span class="math inline">{\boldsymbol{{R}}^{\boldsymbol{{n}}} =
\{\boldsymbol{{x}}\colon \boldsymbol{{n}}\to\boldsymbol{{R}}\}}</span>
by <span class="math inline">x_i =\boldsymbol{{x}}(i)</span>, <span
class="math inline">i\in\boldsymbol{{n}}</span>. Here <span
class="math inline">\boldsymbol{{R}}^n</span> is a <a
href="https://ncatlab.org/nlab/show/cartesian+product">cartesian
product</a> of <span class="math inline">n</span> copies of <span
class="math inline">\boldsymbol{{R}}</span> while while <span
class="math inline">\boldsymbol{{R}}^{\boldsymbol{{n}}}</span> is a <a
href="https://ncatlab.org/nlab/show/exponential+object">set
exponential</a>.<a href="#fnref1" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
</ol>
</aside>
</body>
</html>
