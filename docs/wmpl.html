<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Keith A. Lewis" />
  <title>What is my P&amp;L?</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <link rel="stylesheet" href="math.css" />
  <script defer=""
  src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: true
   });
}}});
  </script>
  <link rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">What is my P&amp;L?</h1>
<p class="author">Keith A. Lewis</p>
<div class="abstract">
<div class="abstract-title">Abstract</div>
It is not just bean counting.
</div>
</header>
<p>Every trader knows about slippage. The price quoted by an exchange is
not necessarly the price at which a trade is executed. Market orders get
matched against limit orders like blocks dropping in tetris. Limit order
quantities get eaten up until the market order is filled. It is also
possible other market orders or more limit orders are placed in the
meantime.</p>
<p>If you have spent time on a trading floor you have probably heard a
discussion between a trader and a back office person about how their
positions were marked-to-market. Traders care about this very much
because that is used to calculate their profit and loss, but often don’t
understand exactly how this is calculated.</p>
<p>The atoms of finance are <em>positions</em>: a legal entity owns some
amount of an instrument. Positions change via <em>transactions</em>:
amounts and instruments are exchanged at some time between two entities.
A <em>portfolio</em> is a collection of positions belonging to an
entity. The <em>market</em> is the collection of all portfolios.</p>
<p>We can express this using math by a position is an amount,
instrument, and entity: <span class="math inline">\pi = (a, i, e)</span>
and a transaction is the exchange of positions at some time: <span
class="math inline">\chi = (t, \pi, \pi&#39;)</span>. The market <span
class="math inline">{\{\ldots,(a, i,
e),\ldots,(a&#39;,i&#39;,e&#39;),\ldots\}}</span> becomes <span
class="math inline">{\{\ldots,(a&#39;, i&#39;,
e),\ldots,(a,i,e&#39;),\ldots\}}</span> after the transaction.</p>
<p>The <em>market price</em> of this particular transaction is <span
class="math inline">X = a/a&#39;</span>. It is often the case prices are
quoted in terms of some native currency. If Ford has “price” $10.4 per
share then <span class="math inline">a = 10.4a&#39;</span> dollars can
be exchanged for <span class="math inline">a&#39;</span> shares.</p>
<p>If <span class="math inline">\mathcal{M} = \{\pi_j\}</span> is a
market define the <em>net</em> amount of instrument <span
class="math inline">i</span> held by entity <span
class="math inline">e</span> by <span class="math display">
    N(i, e) = \sum_{\pi_j = (a_j, i_j, e_j)}\{a_j\mid i = i_j, e =
e_j\}.
</span></p>
<p>This is just bean counting of instruments. The tricky thing is to
come up with a way to convert an amount of an instrument into a price in
a native currency in the absence of an actual trade.</p>
<p>To <em>mark-to-market</em> entity <span class="math inline">e</span>
it is necessary to specify a “price” <span
class="math inline">X(i,i&#39;)</span> where <span
class="math inline">i</span> is the native currency. …</p>
</body>
</html>
