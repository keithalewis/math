---
title: A Unified Model of Derivative Securities
author: Keith A. Lewis
institution: KALX, LLC
email: kal@kalx.net
classoption: fleqn
abstract: Value, hedge, and manage risk of any portfolio
...

\newcommand\RR{\mathbf{R}}
\renewcommand\AA{\mathcal{A}}
\renewcommand\BB{\mathcal{B}}
\newcommand\bm[1]{\boldsymbol{#1}}

## Algebras of Sets

Let $\Omega$ be a _sample space_ of all possible outcomes.  An _algebra
of sets_ on the set $\Omega$ is a collection of subsets of $\Omega$
close under complement and set union. By De Morgan's laws they are also
closed under set intersection. Elements of the algebra are _events_ and
we can reason about 'not A' ($\Omega\setminus A$), 'A or B' ($A\cup B$),
and 'A and B' ($A\cap B$) for events $A, B$.

__Exercise__. _If $\AA$ is an algebra then so is $\AA\cup\{\emptyset,\Omega\}$_.

We assume all algebras contain the empty set, hence also $\Omega$. 

For $\omega\in\Omega$ the _atom_ containing $\omega$, $A_\omega = \cap\{A\in\AA\mid\omega\in A\}$,
also belongs to the algebra.

__Exercise__. _Show $\{A_\omega\mid\omega\in\Omega\}$ is a_ partition _of $\Omega$_.

_Hint_. Show $\Omega = \cup_{\omega\in\Omega} A_\omega$ and either $A_\omega = A_{\omega'}$
or $A_\omega\cap A_{\omega'} = \emptyset$ for $\omega, \omega'\in\Omega$.

__Exercise__. _Every algebra is generated by its atoms_.

_Hint_: Show the smallest algebra containing the atoms of the algebra $\AA$ is $\AA$.

This shows we can identify an algebra of sets with its atoms.

A function $f\colon\Omega\to\RR$ is $\AA$-measurable if 
$f^{-1}((-\infty, x]) = \{\omega\in\Omega\mid f(x)\le x\}\in\AA$ for every
$x\in\RR$.

__Exercise__. _Show $f\colon\Omega\to\RR$ is $\AA$-measurable if and only if $f$ is
constant on the atoms of $\AA$_.

This shows $\AA$-measurable functions are just functions on the atoms of $\AA$
so we write $f\colon\AA\to\RR$ to indicate $f$ is $\AA$-measurable.

### Partitions

Partitions represent partial information. Complete information is the partition of
singletons $\{\{\omega\}\mid\omega\in\Omega\}$. No information is the partition $\{\Omega\}$.
Partial information is knowing which atom of the partition $\omega\in\Omega$ belongs to.

If $\AA$ and $\BB$ are algebras and $\BB\subseteq\AA$ we say $\BB$
is _coarser_ than $\AA$ and $\AA$ is _finer_ than $\BB$.

## Measures

Let $B(S)$ be the Banach space of bounded functions on the set $S$
where the norm is $\|f\| = \sup_{s\in S} |f(s)|$, $f\in B(S)$.
The dual of $B(S)$ is the set of all bounded linear functionals $L\colon B(S)\to\RR$.
The _dual pairing_ is $\langle f, L\rangle = Lf$.
Given $E\subseteq S$ define $\lambda(E) = L1_E$ where $1_E\colon S\to\RR$ is
the indicator function of $E$, $1_E(s) = 1$ if $s\in E$ and
$1_E(s) = 0$ if $s\not\in E$.

Since $1_\emptyset = 0$ and $1_{E\cup F} = 1_E + 1_F - 1_{E\cap F}$ we have
$\lambda(\emptyset) = 0$ and $\lambda(E\cup F) = \lambda(E) + \lambda(F) - \lambda({E\cap F)}$
so $\lambda$ is a (finitely additive) measure on $S$.
The set of such measures is denoted $ba(S)$ and is also a Banach space
with $\|\lambda\| = \sup_{\|f\|\le1} \int_S f\,d\lambda$ where
$\int_S f\,d\lambda = Lf$.
The linear map $L\mapsto\lambda$ is an isometric isomorphism.

If $\BB\subseteq\AA$ are algebras and $\lambda\in ba(\AA)$ we write $\lambda|_\BB$
to denote the restriction of $\lambda$ to $\BB$. If $(\AA_t)_{t\in T}$ satisfy
$\AA_t \subseteq \AA_u$, $t \le u$, and $(M_t)_{t\in T}$ are
measures with $M_t = M_u|_{\AA_u}$, $t \le u$, we say $(M_t)$ is a _martingale measure_.

For $g\in B(S)$ define $M_g\colon B(S)\to B(S)$ by $M_g f = fg$, $f\in
B(S)$, to be the linear operator of multiplication by $g$, Its adjoint
$M_g^*\colon ba(S)\to ba(S)$ is defined by $\langle M_gf,\lambda \rangle =
\langle f,M_g^*\lambda \rangle$, $f, g\in B(S)$, $\lambda\in ba(S)$. In
terms of integrals $\int_S M_gf\,d\lambda = \int_S f\,dM_g^*\lambda$,
or simply $\int_S (fg)\,d\lambda = \int_S f\,d(g\lambda)$.


## Market Model

Let $T$ be the set of trading times, $\Omega$ the sample space of possible outcomes,
and $I$ be the set of market instruments. Partial information is represented by
partitions $\AA_t$, $t\in T$, where $\AA_t\subseteq\AA_u$, $t\le u$.
The _prices_ of the market instruments at time $t$ 
is the vector $X_t\in\RR^I$.
Instruments can be bought or sold in any amount at the given price.
The _cash flows_ of the market instruments at time $t$
is $C_t\in\RR^I$. Stocks have dividends, bonds have coupons, and futures have
daily margin adjustments as cash flow. The price of a futures is always 0.

A _market model_ specifies prices and cash flows based on available information
$$
\begin{aligned}
	X_t&\colon\AA_t\to\RR^I \\
	C_t&\colon\AA_t\to\RR^I \\
\end{aligned}
$$

## Trading Strategy

A _trading strategy_ is a finite collection of increasing stopping times $(\tau_j)$
and functions $\Gamma_j\colon\AA_{\tau_j}\to\RR^I$.
At time $\tau_j$, $\Gamma_j$ shares are purchased in each instrument.
Share accumulate to _positions_ $\Delta_t = \sum_{\tau_j < t} \Gamma_j$.
Note the strict inequality; it takes some time for a trade to settle.
Let $\Gamma_t(\omega) = \Gamma_j(\omega) 1(t = \tau_j(\omega))$ so
$\Gamma_t = \sum_{s<t} \Gamma_s$.

The _value_, or _mark-to-market_, at time $t$ is $V_t = (\Delta_t + \Gamma_t)\cdot X_t$.
It is the amount that would be obtained by selling the existing positions and the
trades just done at prevailing market prices.
The impact on the trading _account_ at time $t$ is $A_t = \Delta_t\cdot C_t - \Gamma_t\cdot X_t$.
You receive cash flows proportional to to the existing positions and
pay for the trades executed at time $t$.

The value and account associated with a trading strategy are
$$
\begin{aligned}
	V_t&\colon\AA_t\to\RR^I \\
	A_t&\colon\AA_t\to\RR^I \\
\end{aligned}
$$

## Arbitrage

We say arbitrage exists for a market model if there is a trading strategy with $\sum_j \Gamma_j = 0$,
$A_{\tau_0} < 0$, and $A_t \le 0$ for $t > \tau_0$.
The initial trade makes money and subsequent trades never lose money.

__Theorem__. (Fundamental Theorem of Asset Pricing) _A model has no arbitrage if and only
if there exist positive measures $(D_t)_{t\in T}$ with_
$$
	X_t D_t = (X_u D_u + \sum_{t < s \le u} C_s D_s)|_{\AA_t}.
$$

If a money market account exists with price $R_t$ (and no cash flows) the trading
strategy $\Gamma_t = 1$, $\Gamma_{t+\Delta t}$ implies $R_t D_t = (R_{t+\Delta t}D_{t+\Delta t}$.

__Lemma__. _For any arbitrage-free model_
$$
	V_t D_t = (V_u D_u + \sum_{t < s \le u} A_s D_s)|_{\AA_t}.
$$
Note how value and account correspond to prices and cash flows. A trading strategy
creates a synthetic instrument.

__Lemma__. _If $(D_t)_{t\in T}$ are positive measures and $(M_t)_{t\in T}$ is an $\RR^I$-valued
martingale measure then_
$$
	X_t D_t = M_t - \sum_{s\le t} C_s D_s
$$
_is an arbitrage-free model_.

### Example

Let $(B_t)_{t\ge0}$ be standard Brownian motion where
$\Omega = C[0,\infty)$, $P$ is Weiner measure on $\Omega$, and $B_t(\omega) = \omega(t)$.
The algebra $\AA_t$ is the smallest algebra for which $\{B_s\mid s \le t\}$ are measurable.
Since $e^{-\sigma^2 t/2 + \sigma B_t}$ is a martingale,
$e^{-\sigma^2 t/2 + \sigma B_t}P|_{\AA_t}$ is a martingale measure.
For any $\rho\in\RR$ $e^{-\rho t}P$ is a positive measure.
In the case of no dividends, $X_t e^{-\rho t}P|_{\AA_t} = e^{-\sigma^2 t/2 + \sigma B_t}P|_{\AA_t}$
is an arbitrage-free model.

__Exercise__. _Show $Y = E[X|\AA]$ if and only if $YP = (XP)|_\AA$_.

_Hint_: $Y = E[X|\AA]$ if and only if $Y$ is $\AA$-measurable and
$\int_A Y\,dP = \int_A X\,dP$ for all $A\in\AA$.
